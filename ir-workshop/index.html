<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IR-LAB | Live Progress</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background:#ffffff;
  color:#0f172a;
  margin:0;
  padding:20px;
  text-align:center;
}

header {
  margin-bottom: 20px;
  border-bottom: 2px solid #0d9488;
  padding-bottom: 15px;
}

header h1 {
  margin-top:5px;
}

header .org-logos {
  display:flex;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
  gap:20px;
  margin-bottom:10px;
}

header .org-logos img {
  max-height:50px;
}

.team-card {
  background:#d3d3d3;
  max-width:600px;
  margin:20px auto;
  padding:20px;
  border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
  text-align:left;
}

.current-phase {
  font-weight:600;
  color:#0d9488; /* turquoise */
  margin-bottom:10px;
}

ul {
  list-style:none;
  padding:0;
}

li {
  display:flex;
  align-items:center;
  margin-bottom:6px;
  font-size:16px;
}

.dot {
  width:12px;
  height:12px;
  border-radius:50%;
  margin-right:8px;
}

.done { background:#16a34a; } /* green = done */
.todo { background:#f87171; } /* red = incomplete */

footer {
  margin-top:20px;
  font-size:0.85rem;
  color:#64748b;
  border-top:2px solid #0d9488;
  padding-top:10px;
}

footer .tool-logos {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:15px;
  margin-top:10px;
}

footer .tool-logos img {
  max-height:25px; /* small uniform size */
}
</style>
</head>

<body>

<header>
  <div class="org-logos">
    <img src="images/org1.png" alt="Org 1 Logo">
    <img src="images/org2.png" alt="Org 2 Logo">
  </div>
  <h1>Incident Response (IR) Lab: Live Progress</h1>
  <p id="lastUpdated">Last updated: --</p>
</header>

<div id="teams"></div>

<footer>
  IR STUDY (Date)
  <div class="tool-logos">
    <img src="images/thehive.png" alt="TheHive Logo">
    <img src="images/misp.png" alt="MISP Logo">
    <img src="images/cortex.png" alt="Cortex Logo">
    <img src="images/mattermost.png" alt="Mattermost Logo">
  </div>
</footer>

<script>
async function loadData() {
  const res = await fetch("data/progress.json");
  const data = await res.json();

  document.getElementById("lastUpdated").textContent =
    "Last updated: " + data.lastUpdated;

  const container = document.getElementById("teams");
  container.innerHTML = "";

  data.teams.forEach(team => {
    const card = document.createElement("div");
    card.className = "team-card";

    card.innerHTML = `
      <h2>${team.teamName}</h2>
      <div class="current-phase">Current phase: ${team.currentPhase}</div>
      <ul>
        ${phase("Detection & Analysis", team.phases.detection_analysis.completed)}
        ${phase("Containment", team.phases.containment.completed)}
        ${phase("Eradication", team.phases.eradication.completed)}
        ${phase("Recovery", team.phases.recovery.completed)}
        ${phase("Post-Incident Activity", team.phases.post_incident.completed)}
      </ul>
    `;

    container.appendChild(card);
  });
}

function phase(name, completed) {
  const cls = completed ? "done" : "todo";
  return `<li><span class="dot ${cls}"></span>${name}</li>`;
}

loadData();
setInterval(loadData, 15000);
</script>

</body>
</html>
